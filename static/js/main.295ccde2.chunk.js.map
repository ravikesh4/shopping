{"version":3,"sources":["config.js","auth/index.js","core/ShowImage.js","core/Card.js","core/cartHelpers.js","core/Menu.js","core/Layout.js","user/Signup.js","user/Signin.js","core/apiCore.js","core/Search.js","core/Home.js","auth/PrivateRoute.js","user/UserDashboard.js","user/apiUser.js","auth/AdminRoute.js","user/AdminDashboard.js","admin/apiAdmin.js","admin/AddCategory.js","admin/AddProduct.js","core/Checkbox.js","core/Radiobox.js","core/fixedPrices.js","core/Shop.js","core/Product.js","core/Checkout.js","core/Cart.js","admin/Orders.js","user/Profile.js","admin/ManageProducts.js","admin/UpdateProduct.js","Routes.js","index.js"],"names":["API","process","isAuthenticated","window","localStorage","getItem","JSON","parse","ShowImage","item","url","className","src","_id","alt","name","style","height","maxWidth","Card","product","showViewProductButton","showAddToCartButton","cartUpdate","showRemoveProductButton","useState","redirect","setRedirect","count","setCount","addToCart","addItem","to","shouldRedirect","description","substring","price","category","moment","createdAt","fromNow","quantity","showViewButton","onClick","showAddToCart","href","removeItem","showRemoveButton","type","value","onChange","productId","event","target","updateItem","showCartUpdateOptions","next","cart","push","Array","from","Set","map","p","id","find","setItem","stringify","i","splice","isActive","history","path","location","pathname","color","withRouter","length","user","role","cursor","fetch","method","then","response","console","log","catch","err","signout","Layout","title","children","Signup","email","password","error","success","values","setValues","handleChange","clickSubmit","preventDefault","headers","Accept","body","json","data","display","Signin","loading","redirectToReferrer","signin","authenticate","getProduct","sortBy","getCategories","getFilteredProducts","skip","limit","filters","Search","categories","search","results","searched","setData","useEffect","searchData","params","query","queryString","list","undefined","searchSubmit","searchMessage","onSubmit","c","key","placeholder","border","searchedProducts","Home","productsBySell","setProductBySell","productsByArrival","setProductByArrival","setError","PrivateRoute","Component","component","rest","render","props","state","Dashboard","setHistory","token","init","userId","Authorization","getPurchaseHistory","h","products","purchaseHistory","AdminRoute","AdminDashboard","AddCategory","setName","setSuccess","e","createCategory","showSuccess","showError","autoFocus","required","AddProduct","shipping","photo","createdProduct","redirectToProfile","formData","FormData","files","set","createProduct","accept","Checkbox","handleFilters","checked","setChecked","handleToggle","currentCategoryId","indexOf","newCheckCategoryId","Radiobox","prices","setValue","array","Shop","myFilters","setMyFilters","setCategories","setSkip","size","setSize","filteredResults","setFilteredResults","loadFilteredResults","newFilters","loadMore","toSkip","filterBy","priceValues","handlePrice","parseInt","Product","setProduct","relatedProduct","setRelatedProduct","loadSingleProduct","read","listRelated","match","Checkout","clientToken","instance","address","getToken","getBraintreeClientToken","getTotal","reduce","currentValue","nextValue","deliveryAddress","buy","requestPaymentMethod","paymentData","paymentMethodNonce","nonce","amount","processPayment","createOrderData","transaction_id","transaction","order","createOrder","message","handleAddress","showDropIn","onBlur","options","authorization","onInstance","Cart","items","setItems","showItems","Orders","orders","setOrders","statusValues","setStatusValues","loadOrders","listOrders","loadStatusValues","getStatusValues","showInput","readOnly","handleStatusChange","orderId","status","updateOrderStatus","datat","o","oIndex","borderBottom","index","showStatus","pIndex","padding","Profile","update","auth","updateUser","profileUpdate","redirectUser","ManageProducts","setProducts","loadProducts","destroy","deleteProduct","UpdateProduct","initCategories","updateProduct","Routes","exact","ReactDOM","StrictMode","basename","document","getElementById"],"mappings":"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","file":"static/js/main.295ccde2.chunk.js","sourcesContent":["export const API = process.env.REACT_APP_API_URL;\r\n","\r\nimport {API} from '../config'\r\n\r\n\r\nexport const signup = (user) => {\r\n        // console.log(name, email, password);\r\n        return fetch(`${API}/signup`, {\r\n            method: \"POST\",\r\n            headers: {\r\n                Accept: 'application/json',\r\n                \"Content-Type\": \"application/json\"\r\n            },\r\n            body: JSON.stringify(user)\r\n        })\r\n        .then(response => {\r\n            return response.json()\r\n        })\r\n        .catch(err => {\r\n            console.log(err);\r\n            \r\n        })\r\n        \r\n    }\r\n\r\n\r\n\r\n    export const signin = (user) => {\r\n        // console.log(name, email, password);\r\n        return fetch(`${API}/signin`, {\r\n            method: \"POST\",\r\n            headers: {\r\n                Accept: 'application/json',\r\n                \"Content-Type\": \"application/json\"\r\n            },\r\n            body: JSON.stringify(user)\r\n        })\r\n        .then(response => {\r\n            return response.json()\r\n        })\r\n        .catch(err => {\r\n            console.log(err);\r\n            \r\n        })\r\n        \r\n    }\r\n\r\nexport const authenticate = (data, next) => {\r\n    if(typeof window !== 'undefined') {\r\n        localStorage.setItem('jwt', JSON.stringify(data))\r\n        next()\r\n    }\r\n}\r\n\r\nexport const signout = (next) => {\r\n    if(typeof window !== 'undefined') {\r\n        localStorage.removeItem('jwt')\r\n        next();\r\n        return fetch(`${API}/signout`, {\r\n            method: 'GET'\r\n        })\r\n        .then(response => {\r\n            console.log('signout', response);\r\n        })\r\n        .catch(err => console.log(err))\r\n    }\r\n}\r\n\r\nexport const isAuthenticated = () => {\r\n    if(typeof window == 'undefined') {\r\n        return false;\r\n    }\r\n\r\n    if(localStorage.getItem('jwt')) {\r\n        return JSON.parse(localStorage.getItem('jwt'))\r\n    } else {\r\n        return false;\r\n    }\r\n}","import React from 'react'\r\nimport {API} from '../config'\r\n\r\nconst ShowImage = ({item, url}) => (\r\n    <div className=\"product-img\">\r\n        <img src={`${API}/${url}/photo/${item._id}`} alt={item.name} className=\"mb-3\" style={{height: '200px', maxWidth: '100%'}} />\r\n    </div>\r\n)\r\n\r\nexport default ShowImage;","import React, { useState } from 'react'\r\nimport {Link, Redirect} from 'react-router-dom'\r\nimport ShowImage from './ShowImage';\r\nimport moment from 'moment'\r\nimport {addItem, updateItem, removeItem} from './cartHelpers'\r\n\r\nconst Card = ({product, showViewProductButton = true, showAddToCartButton = true, cartUpdate= false, showRemoveProductButton= false}) => {\r\n\r\n    const [redirect, setRedirect] = useState(false)\r\n    const [count, setCount] = useState(product.count)\r\n\r\n    const showViewButton = (showViewProductButton) => {\r\n        return (\r\n            showViewProductButton && (\r\n                <button className=\"btn btn-outline-primary mt-2 mr-2 mb-2\">\r\n                    View Product\r\n                </button>\r\n            )\r\n        )\r\n    }\r\n\r\n    const addToCart = () => {\r\n        addItem(product, () => {\r\n            setRedirect(true)\r\n        })\r\n    }\r\n\r\n    const shouldRedirect = redirect => {\r\n        if(redirect) {\r\n            return <Redirect to=\"/shopping/cart\" />\r\n        }\r\n    }\r\n\r\n    const showAddToCart = (showAddToCartButton) => {\r\n        return  ( showAddToCartButton && (<button onClick={addToCart} className=\"btn btn-outline-warning mt-2 mb-2\">\r\n        Add to cart\r\n    </button>) )\r\n    }\r\n\r\n    // const showRemoveButton = (showRemoveProductButton) => {\r\n    //     return  ( showRemoveProductButton && (<a href=\"/shopping/cart\" onClick={() => removeItem(product._id)} className=\"btn btn-outline-danger mt-2 mb-2\">\r\n    //     Remove Product\r\n    // </a>) )\r\n    // }\r\n\r\n    const showRemoveButton = (showRemoveProductButton) => {\r\n        return  ( showRemoveProductButton && (<a href=\"/shopping\" onClick={() => removeItem(product._id)} className=\"btn btn-outline-danger mt-2 mb-2\">\r\n        Remove Product\r\n    </a>) )\r\n    }\r\n\r\n\r\n    const showStock = (quantity) => {\r\n        return quantity > 0 \r\n        ? (<span className=\"badge badge-primary badge-pill\">In Stock</span>) \r\n        : (<span className=\"badge badge-warning badge-pill\">Out of stock</span>)\r\n    }\r\n\r\n    const handleChange = productId => event => {\r\n        setCount(event.target.value < 1 ? 1 : event.target.value)\r\n        if(event.target.value >= 1) {\r\n            updateItem(productId, event.target.value)\r\n        }\r\n    }\r\n\r\n    const showCartUpdateOptions = cartUpdate => {\r\n        return cartUpdate && <div>\r\n            <div className=\"input-group mb-3\">\r\n                <div className=\"input-group-prepend\">\r\n                    <span className=\"input-group-text\">Adjust Quantity</span>\r\n                </div>\r\n                <input type=\"number\" className=\"form-control\" value={count} onChange={handleChange(product._id)} />\r\n                {/* <a href=\"/shopping/cart\" className=\"btn btn-small btn-primary\">Update</a> */}\r\n                <a href=\"/shopping\" className=\"btn btn-small btn-primary\">Update</a>\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n    return (\r\n        // <div className=\"col-md-4 mb-3\">\r\n            <div className=\"card\">\r\n                <div className=\"card-header name\">{product.name}</div>\r\n                <div className=\"card-body\">\r\n                    {shouldRedirect(redirect)}\r\n                    <ShowImage item={product} url=\"product\" />\r\n                    <p className=\"lead mt-2\">{product.description == null ? 'No Description' : product.description.substring(0,40)}...</p>\r\n                    <p className=\"black-10\">₹ {product.price}</p>\r\n                    <p className=\"black-9\">Category: {product.category && product.category.name}</p>\r\n                    <p className=\"black-8\">Added On: {moment(product.createdAt).fromNow()}</p>\r\n                    {showStock(product.quantity)} <br />\r\n                    <Link to={`/shopping/product/${product._id}`}>\r\n                        {showViewButton(showViewProductButton)}\r\n                    </Link>\r\n                    {showAddToCart(showAddToCartButton)}\r\n\r\n                    {showRemoveButton(showRemoveProductButton)}\r\n                    \r\n                    {showCartUpdateOptions(cartUpdate)}\r\n                </div>\r\n            </div>\r\n        // </div>\r\n    )\r\n} \r\n\r\n\r\nexport default Card;","import Card from \"./Card\";\r\n\r\nexport const addItem = (item, next) => {\r\n    let cart = [];\r\n    if(typeof window !== 'undefined') {\r\n        if(localStorage.getItem('cart')) {\r\n            cart = JSON.parse(localStorage.getItem('cart'))\r\n        }\r\n        cart.push({\r\n            ...item, \r\n            count: 1\r\n        })\r\n\r\n        cart = Array.from(new Set(cart.map((p) => p._id))).map((id) => {\r\n            return cart.find(p => p._id === id);\r\n        });\r\n\r\n        localStorage.setItem('cart', JSON.stringify(cart))\r\n        next();\r\n    }\r\n}\r\n\r\nexport const itemTotal = () => {\r\n    if(typeof window !== 'undefined') {\r\n        if(localStorage.getItem(\"cart\")) {\r\n            return JSON.parse(localStorage.getItem(\"cart\")).length;\r\n        }\r\n    }\r\n    return 0;\r\n}\r\n\r\nexport const getCart = () => {\r\n    if(typeof window !== 'undefined') {\r\n        if(localStorage.getItem(\"cart\")) {\r\n            return JSON.parse(localStorage.getItem(\"cart\"));\r\n        }\r\n    }\r\n    return [];\r\n}\r\n\r\nexport const updateItem = (productId, count) => {\r\n    let cart = []\r\n    if(typeof window !== 'undefined') {\r\n        if(localStorage.getItem('cart')) {\r\n            cart = JSON.parse(localStorage.getItem('cart'))\r\n        }\r\n\r\n        cart.map((product, i) => {\r\n            if(product._id === productId) {\r\n                cart[i].count = count\r\n            }\r\n        })\r\n\r\n        localStorage.setItem('cart', JSON.stringify(cart))\r\n    }\r\n}\r\n\r\nexport const removeItem = (productId) => {\r\n    let cart = []\r\n    if(typeof window !== 'undefined') {\r\n        if(localStorage.getItem('cart')) {\r\n            cart = JSON.parse(localStorage.getItem('cart'))\r\n        }\r\n\r\n        cart.map((product, i) => {\r\n            if(product._id === productId) {\r\n                cart.splice(i, 1)\r\n            }\r\n        })\r\n\r\n        localStorage.setItem('cart', JSON.stringify(cart))\r\n    }\r\n\r\n    return cart\r\n}\r\n\r\n\r\nexport const emptyCart = next => {\r\n    if(typeof window !== 'undefined') {\r\n        localStorage.removeItem('cart')\r\n        next()\r\n    }\r\n}","import React, {Fragment} from 'react'\r\nimport {Link, withRouter} from 'react-router-dom'\r\nimport {signout, isAuthenticated} from '../auth'\r\nimport { itemTotal } from './cartHelpers'\r\n\r\nconst isActive = (history, path) => {\r\n    if(history.location.pathname === path) {\r\n        return {color: '#ff9000'}\r\n    } else {\r\n        return {color: '#ffffff'}\r\n    }\r\n}\r\n\r\nconst Menu = ({history}) => (\r\n    <div>\r\n        <ul className=\"nav nav-tabs bg-primary\">\r\n            <li className=\"nav-item\">\r\n                <Link className=\"nav-link\" style={isActive(history, '/shopping/')}  to=\"/shopping\">Home</Link>\r\n            </li>\r\n            <li className=\"nav-item\">\r\n                <Link className=\"nav-link\" style={isActive(history, '/shopping/shop')} to=\"/shopping/shop\">Shop</Link>\r\n            </li>\r\n            <li className=\"nav-item\">\r\n                <Link className=\"nav-link\" style={isActive(history, '/shopping/cart')} to=\"/shopping/cart\">Cart <sup><small className=\"cart-badge\">{itemTotal()}</small></sup></Link>\r\n            </li>\r\n            {isAuthenticated() && isAuthenticated().user.role === 0 && (\r\n                <li className=\"nav-item\">\r\n                <Link className=\"nav-link\" style={isActive(history, '/shopping/user/dashboard')} to=\"/shopping/user/dashboard\">Dashboard</Link>\r\n            </li>\r\n            )}\r\n            {isAuthenticated() && isAuthenticated().user.role === 1 && (\r\n                <li className=\"nav-item\">\r\n                <Link className=\"nav-link\" style={isActive(history, '/shopping/admin/dashboard')} to=\"/shopping/admin/dashboard\">Dashboard</Link>\r\n            </li>\r\n            )}\r\n            {!isAuthenticated() && (\r\n                <Fragment>\r\n                    <li className=\"nav-item\">\r\n                    <Link className=\"nav-link\" style={isActive(history, '/shopping/signin')} to=\"/shopping/signin\">Signin</Link>\r\n                </li>\r\n                <li className=\"nav-item\">\r\n                    <Link className=\"nav-link\" style={isActive(history, '/shopping/signup')} to=\"/shopping/signup\">Signup</Link>\r\n                </li>\r\n            \r\n                </Fragment>\r\n            )}\r\n            {isAuthenticated() && (\r\n                <li className=\"nav-item\">\r\n                <span className=\"nav-link\" style={{cursor: 'pointer', color: '#ffffff'}} onClick={() => signout(() => {\r\n                    history.push('/shopping')\r\n                })}>Signout</span>\r\n            </li>\r\n            )}\r\n        </ul>\r\n    </div>\r\n)\r\n\r\nexport default withRouter(Menu);","import React from 'react'\r\nimport Menu from './Menu'\r\nimport '../styles.css'\r\n\r\n\r\nconst Layout = ({title= 'Title', description= 'Description', className, children}) => \r\n\r\n<div>\r\n    <Menu />\r\n    <div className=\"header text-center\">\r\n        <div><h2>{title}</h2>\r\n        <p className=\"lead\">{description}</p></div>\r\n    </div>\r\n    <div className={className}>{children}</div>\r\n</div>\r\n\r\nexport default Layout;","import React, {useState} from 'react'\r\nimport {Link} from 'react-router-dom'\r\nimport Layout from '../core/Layout'\r\nimport {signup} from '../auth'\r\n\r\nconst Signup = () => {\r\n\r\n    const [values, setValues] = useState({\r\n        name: '',\r\n        email: '',\r\n        password: '',\r\n        error: '',\r\n        success: false\r\n    })\r\n\r\n    const {name, email, password, success, error} = values\r\n\r\n    const handleChange = name => event => {\r\n        setValues({...values, error: false, [name]: event.target.value})\r\n    }\r\n\r\n\r\n\r\n    const clickSubmit = event => {\r\n        event.preventDefault()\r\n        setValues({...values, error: false})\r\n        signup({name, email, password})\r\n        .then(data => {\r\n            if(!name || !email || !password) {\r\n                setValues({...values, error: true, success: false})\r\n            } else {\r\n                setValues({\r\n                    ...values, name: '', email: '' , password: '', error: '', success: true\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    const signUpForm = () => (\r\n        <form>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Name</label>\r\n                <input onChange={handleChange('name')} type=\"text\" value={name} className=\"form-control\" />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Email</label>\r\n                <input onChange={handleChange('email')} type=\"email\" value={email} className=\"form-control\" />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Password</label>\r\n                <input onChange={handleChange('password')} type=\"password\" value={password} className=\"form-control\" />\r\n            </div>\r\n\r\n            <button onClick={clickSubmit} className=\"btn btn-primary\">Sumbit</button>\r\n            \r\n        </form>\r\n    )\r\n\r\n    const showSuccess = () => {\r\n        return (\r\n            <div className=\"alert alert-info\" style={{display: success ? '' : 'none'}}>\r\n                New account created please <Link to=\"/shopping/signin\">Signin</Link>\r\n            </div>\r\n        )\r\n    }\r\n    const showError = () => {\r\n        return (\r\n            <div className=\"alert alert-danger\" style={{display: error ? '' : 'none'}}>\r\n                Something went wrong, Please check details\r\n            </div>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <Layout title=\"Signup\" description=\"Signup to shopping app\" className=\"container col-md-8 offset-md-2\">\r\n            {showSuccess()}\r\n            {showError()}\r\n            {signUpForm()}\r\n            {/* {JSON.stringify(values)} */}\r\n        </Layout>\r\n    )\r\n}\r\n\r\nexport default Signup;","import React, {useState} from 'react'\r\nimport {Redirect} from 'react-router-dom'\r\nimport Layout from '../core/Layout'\r\nimport {signin, authenticate, isAuthenticated} from '../auth'\r\n\r\nconst Signin = () => {\r\n\r\n    const [values, setValues] = useState({\r\n        email: '',\r\n        password: '',\r\n        error: '',\r\n        loading: false,\r\n        redirectToReferrer: false \r\n    })\r\n\r\n    const {email, password, loading, error, redirectToReferrer} = values\r\n    const {user} = isAuthenticated()\r\n\r\n\r\n    const handleChange = name => event => {\r\n        setValues({...values, error: false, [name]: event.target.value})\r\n    }\r\n\r\n\r\n\r\n    const clickSubmit = event => {\r\n        event.preventDefault()\r\n        setValues({...values, error: false, loading: true})\r\n        signin({email, password})\r\n        .then(data => {\r\n            if(data.error ) {\r\n                setValues({...values, error: true, loading: false})\r\n            } else {\r\n               authenticate(data, () => {\r\n                setValues({\r\n                    ...values, redirectToReferrer: true, \r\n                })\r\n               })\r\n            }\r\n        })\r\n    }\r\n\r\n    const signUpForm = () => (\r\n        <form>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Email</label>\r\n                <input onChange={handleChange('email')} type=\"email\" value={email} className=\"form-control\" />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Password</label>\r\n                <input onChange={handleChange('password')} type=\"password\" value={password} className=\"form-control\" />\r\n            </div>\r\n\r\n            <button onClick={clickSubmit} className=\"btn btn-primary\">Sumbit</button>\r\n            \r\n        </form>\r\n    )\r\n\r\n    const showLoading = () => {\r\n        return (\r\n            loading && <div className=\"alert alert-info\" >\r\n                <h2>Loading...</h2>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const redirectUser = () => {\r\n        if(redirectToReferrer) {\r\n            if(user && user.role === 1 ) {\r\n                return <Redirect to=\"/shopping/admin/dashboard\" ></Redirect>\r\n            } else {\r\n            return <Redirect to=\"/shopping/user/dashboard\" ></Redirect>\r\n            }\r\n        }\r\n        if(isAuthenticated()) {\r\n            return <Redirect to=\"/shopping/user/dashboard\" ></Redirect>\r\n        }\r\n    }\r\n    const showError = () => {\r\n        return (\r\n            <div className=\"alert alert-danger\" style={{display: error ? '' : 'none'}}>\r\n                Username and password doesn't match, Please check details\r\n            </div>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <Layout title=\"Signin\" description=\"Signin to shopping app\" className=\"container col-md-8 offset-md-2\">\r\n            {showLoading()}\r\n            {showError()}\r\n            {signUpForm()}\r\n            {redirectUser()}\r\n            {/* {JSON.stringify(values)} */}\r\n        </Layout>\r\n    )\r\n}\r\n\r\nexport default Signin;","import {API} from '../config'\r\nimport queryString from 'query-string' \r\n\r\nexport const getProduct = (sortBy) => {\r\n    return fetch(`${API}/products?sortBy=${sortBy}&order=desc&limit=6`, {\r\n        method: 'GET'\r\n    })\r\n    .then(response => {\r\n        return response.json();\r\n    })\r\n    .catch(err => console.log(err))\r\n}\r\n\r\nexport const getCategories = () => {\r\n    return fetch(`${API}/categories`, {\r\n        method: 'GET'\r\n    })\r\n    .then(response => {\r\n        return response.json();\r\n    })\r\n    .catch(err => console.log(err))\r\n}\r\n\r\n\r\nexport const getFilteredProducts = (skip, limit, filters= {}) => {\r\n\r\n    const data = {\r\n        limit, skip, filters\r\n    }\r\n    \r\n    return fetch(`${API}/products/by/search/`, {\r\n        method: \"POST\",\r\n        headers: {\r\n            Accept: 'application/json',\r\n            \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify(data)\r\n    })\r\n    .then(response => {\r\n        return response.json()\r\n    })\r\n    .catch(err => {\r\n        console.log(err);\r\n        \r\n    })\r\n    \r\n}\r\n\r\nexport const list = (params) => {\r\n    const query = queryString.stringify(params)\r\n    console.log(query);\r\n    return fetch(`${API}/products/search?${query}`, {\r\n        method: 'GET'\r\n    })\r\n    .then(response => {\r\n        return response.json();\r\n    })\r\n    .catch(err => console.log(err))\r\n}\r\n\r\nexport const read = (productId) => {\r\n    return fetch(`${API}/product/${productId}`, {\r\n        method: 'GET'\r\n    })\r\n    .then(response => {\r\n        return response.json();\r\n    })\r\n    .catch(err => console.log(err))\r\n}\r\n\r\nexport const listRelated = (productId) => {\r\n    return fetch(`${API}/products/related/${productId}`, {\r\n        method: 'GET'\r\n    })\r\n    .then(response => {\r\n        return response.json();\r\n    })\r\n    .catch(err => console.log(err))\r\n}\r\n\r\nexport const getBraintreeClientToken = (userId, token) => {\r\n    return fetch(`${API}/braintree/getToken/${userId}`, {\r\n        method: \"GET\",\r\n        headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: `Bearer ${token}`\r\n        }\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};\r\n\r\n\r\nexport const processPayment = (userId, token, paymentData) => {\r\n    return fetch(`${API}/braintree/payment/${userId}`, {\r\n        method: \"POST\",\r\n        headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify(paymentData)\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};\r\n\r\nexport const createOrder = (userId, token, createOrderData) => {\r\n    return fetch(`${API}/order/create/${userId}`, {\r\n        method: \"POST\",\r\n        headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({order: createOrderData})\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};","import React, {useState, useEffect} from 'react'\r\nimport {getCategories, list} from './apiCore'\r\nimport Card from './Card';\r\n\r\nconst Search = () => {\r\n\r\n    const [data, setData] = useState({\r\n        categories: [],\r\n        category: '',\r\n        search: '',\r\n        results: [],\r\n        searched: false\r\n    })\r\n\r\n    const {categories, category, search, results, searched} = data;\r\n\r\n    const loadCategories = () => {\r\n        getCategories().then(data => {\r\n            if(data.error) {\r\n                console.log(data.error);\r\n            } else {\r\n                setData({...data, categories: data})\r\n            }\r\n        })\r\n    }\r\n\r\n    useEffect(() => {\r\n        loadCategories()\r\n    }, [])\r\n\r\n    const searchData = () => {\r\n        // console.log(search, category);\r\n        if(search) {\r\n            list({search: search || undefined, category: category})\r\n            .then(response => {\r\n                if(response.error) {\r\n                    console.log(response.error);\r\n                } else {\r\n                    setData({...data, results: response, searched: true})\r\n                }\r\n            })\r\n        }\r\n        \r\n    }\r\n\r\n    const searchSubmit = (event) => {\r\n        event.preventDefault()\r\n        searchData()\r\n    }\r\n\r\n    const handleChange = (name) => event => {\r\n        setData({...data, [name]: event.target.value, searched: false})\r\n    }\r\n\r\n    const searchMessage = (searched, results) => {\r\n        if(searched && results.length > 0) {\r\n            return `Found ${results.length} products`\r\n        } \r\n        if(searched && results.length < 1) {\r\n            return `No products found`\r\n        } \r\n        \r\n    }\r\n\r\n    const searchedProducts = (results = []) => {\r\n        return (\r\n        <div>\r\n            <h4 className=\"mt-4 mb-4\">\r\n                {searchMessage(searched, results)}\r\n            </h4>\r\n            <div className=\"row\">\r\n                {results.map((product, i) => (\r\n                    <Card key={i} product={product} />\r\n                ))}\r\n            </div>\r\n        </div>\r\n        )\r\n    }\r\n\r\n    const searchForm = () => {\r\n        return <form onSubmit={searchSubmit}>\r\n            <span className=\"input-group-text\">\r\n                <div className=\"input-group input-group-lg\">\r\n                    <div className=\"input-group-prepend\">\r\n                        <select className=\"btn mr-2\" onChange={handleChange(\"category\")}>\r\n                            <option value=\"All\">All</option>\r\n                            {categories.map((c, i) => (\r\n                                <option key={i} value={c._id}>{c.name}</option>\r\n                            ))}\r\n                        </select>\r\n                    </div>\r\n\r\n\r\n                <input type=\"search\" className=\"form-control\" onChange={handleChange(\"search\")} placeholder=\"Search by name\" />\r\n                </div>\r\n                <div className=\"btn input-group-append\" style={{border: 'none'}}>\r\n                    <button className=\"btn input-group-search\">Search</button>\r\n                </div>\r\n            </span>\r\n        </form>\r\n    }\r\n\r\n    return (\r\n        <div className=\"row\">\r\n            <div className=\"container mb-3\">\r\n                {searchForm()}\r\n                {/* {JSON.stringify(results)} */}\r\n\r\n            </div>\r\n            <div className=\"container-fluid mb-3\">\r\n                {searchedProducts(results)}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Search","import React, {useState, useEffect} from 'react'\r\nimport Layout from './Layout'\r\nimport {getProduct} from './apiCore'\r\nimport Card from './Card';\r\nimport Search from './Search';\r\n\r\n\r\nconst Home = () => {\r\n    const [productsBySell, setProductBySell] = useState([]);\r\n    const [productsByArrival, setProductByArrival] = useState([]);\r\n    const [error, setError] = useState(false)\r\n\r\n\r\n    const loadProductBySell = () => {\r\n        getProduct('sold').then(data => {\r\n            if(data.error) {\r\n                setError(data.error)\r\n            } else {\r\n                setProductBySell(data)\r\n            }\r\n        })\r\n    }\r\n\r\n    const loadProductByArrival = () => {\r\n        getProduct('createdAt').then(data => {\r\n            if(data.error) {\r\n                setError(data.error)\r\n            } else {\r\n                setProductByArrival(data)\r\n            }\r\n        })\r\n    }\r\n\r\n    useEffect(() => {\r\n        loadProductByArrival()\r\n        loadProductBySell()\r\n    }, [])\r\n\r\n    return (\r\n        <Layout title=\"Home Page\" description=\"Shopping app\" className=\"container\">\r\n            <Search />\r\n\r\n            <h2 className=\"mb-4\">New Arrival</h2>        \r\n            <div className=\"row\">\r\n            {productsByArrival.map((product, i) => (\r\n                <div key={i} className=\"col-md-4 mb-3\">\r\n                    <Card  product={product} />\r\n                </div>\r\n                ))}\r\n                </div>       \r\n                <h2 className=\"mb-4\">Best Sellers</h2> \r\n            <div className=\"row\">\r\n            {productsBySell.map((product, i) => (\r\n                <div key={i} className=\"col-md-4 mb-3\">\r\n                    <Card  product={product} />\r\n                </div>\r\n            ))}\r\n            </div>\r\n\r\n            \r\n    </Layout> \r\n    )\r\n}\r\n\r\nexport default Home;","import React from 'react'\r\nimport {Route, Redirect} from 'react-router-dom'\r\nimport {isAuthenticated} from './index'\r\n\r\n\r\nconst PrivateRoute = ({component: Component, ...rest}) => (\r\n    <Route {...rest} render={props => isAuthenticated() ? (\r\n        <Component {...props} />\r\n    ) : (\r\n        <Redirect to={{pathname: '/signin', state:{from: props.location}}} />\r\n    )} />\r\n);\r\n\r\n\r\nexport default PrivateRoute;","import React, { useState, useEffect } from 'react'\r\nimport Layout from '../core/Layout'\r\nimport {isAuthenticated} from '../auth'\r\nimport { Link } from 'react-router-dom'\r\nimport {getPurchaseHistory} from './apiUser'\r\nimport moment from 'moment'\r\n\r\nconst Dashboard = () => {\r\n\r\n    const [history, setHistory] = useState([])\r\n\r\n    const {user: {_id, name, email, role}} = isAuthenticated()\r\n    const token = isAuthenticated().token\r\n\r\n    const init = (userId, token) => {\r\n        getPurchaseHistory(userId, token).then(data => {\r\n            if(data.error) {\r\n                console.log(data.error);\r\n            } else {\r\n                setHistory(data)\r\n            }\r\n        })\r\n    }\r\n\r\n    useEffect(() => {\r\n        init(_id, token)\r\n    }, [])\r\n\r\n    const userLinks = () => {\r\n        return (\r\n            <div className=\"card\">\r\n                <h4 className=\"card-header\">User Links</h4>\r\n                <ul className=\"list-group\">\r\n                    <li className=\"list-group-item\">\r\n                        <Link className=\"nav-link\" to=\"/shopping/cart\">My Cart</Link>\r\n                    </li>\r\n                    <li className=\"list-group-item\">\r\n                        <Link className=\"nav-link\" to={`/shopping/profile/${_id}`}>Update Profile</Link>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n        )\r\n    };\r\n\r\n    const userInfo = () => {\r\n        return (\r\n            \r\n            <div className=\"card mb-5\">\r\n                <h3 className=\"card-header\">User Information</h3>\r\n                <ul className=\"list-group\">\r\n                    <li className=\"list-group-item\">Name: {name}</li>\r\n                    <li className=\"list-group-item\">Email: {email}</li>\r\n                    <li className=\"list-group-item\">Role: {role === 1 ? 'Admin' : 'Registered User'}</li>\r\n                </ul>\r\n            </div>\r\n            \r\n        )\r\n    };\r\n    const purchaseHistory = history => {\r\n        return (\r\n            <div className=\"card mb-5\">\r\n                <h3 className=\"card-header\">Purchase history</h3>\r\n                <ul className=\"list-group\">\r\n                    <li className=\"list-group-item\">\r\n                        {history.map((h, i) => {\r\n                            return (\r\n                                <div key={i}>\r\n                                    <hr />\r\n                                    {h.products.map((p, i) => {\r\n                                        return (\r\n                                            <div key={i}>\r\n                                                <h6>Product name: {p.name}</h6>\r\n                                                <h6>Product price: ${p.price}</h6>\r\n                                                <h6>\r\n                                                    Purchased date:{\" \"}\r\n                                                    {moment(p.createdAt).fromNow()}\r\n                                                </h6>\r\n                                            </div>\r\n                                        );\r\n                                    })}\r\n                                </div>\r\n                            );\r\n                        })}\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n        );\r\n    };\r\n    return (\r\n        <Layout title=\"Dashboard\" description={`Good Day ${name}!`} className=\"container\">\r\n            <div className=\"row\">\r\n                <div className=\"col-md-3\">\r\n                    {userLinks()}\r\n                </div>\r\n                <div className=\"col-md-9\">\r\n                    {userInfo()}\r\n                    {purchaseHistory(history)}    \r\n                </div>\r\n            </div>\r\n        </Layout>\r\n    )\r\n}\r\n\r\nexport default Dashboard;","import {API} from '../config'\r\n\r\nexport const read = (userId, token) => {\r\n    return fetch(`${API}/user/${userId}`, {\r\n        method: 'GET',\r\n        headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: `Bearer ${token}`\r\n        },\r\n    })\r\n    .then(response => {\r\n        return response.json();\r\n    })\r\n    .catch(err => console.log(err))\r\n}\r\n\r\nexport const update = (userId, token, user) => {\r\n    return fetch(`${API}/user/${userId}`, {\r\n        method: \"PUT\",\r\n        headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify(user)\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};\r\n\r\nexport const updateUser = (user, next) => {\r\n    if(typeof window !== 'undefined') {\r\n        if(localStorage.getItem('jwt')) {\r\n            let auth = JSON.parse(localStorage.getItem('jwt'));\r\n            auth.user = user\r\n            localStorage.setItem('jwt', JSON.stringify(auth))\r\n            next()\r\n        }\r\n    }\r\n}\r\n\r\nexport const getPurchaseHistory = (userId, token) => {\r\n    return fetch(`${API}/orders/by/user/${userId}`, {\r\n        method: 'GET',\r\n        headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: `Bearer ${token}`\r\n        },\r\n    })\r\n    .then(response => {\r\n        return response.json();\r\n    })\r\n    .catch(err => console.log(err))\r\n}","import React from 'react'\r\nimport {Route, Redirect} from 'react-router-dom'\r\nimport {isAuthenticated} from './index'\r\n\r\n\r\nconst AdminRoute = ({component: Component, ...rest}) => (\r\n    <Route {...rest} render={props => isAuthenticated() && isAuthenticated().user.role === 1 ? (\r\n        <Component {...props} />\r\n    ) : (\r\n        <Redirect to={{pathname: '/signin', state:{from: props.location}}} />\r\n    )} />\r\n);\r\n\r\nexport default AdminRoute;","import React from 'react'\r\nimport Layout from '../core/Layout'\r\nimport {isAuthenticated} from '../auth'\r\nimport { Link } from 'react-router-dom'\r\n\r\nconst AdminDashboard = () => {\r\n\r\n    const {user: {_id, name, email, role}} = isAuthenticated()\r\n\r\n    const adminLinks = () => {\r\n        return (\r\n            <div className=\"card\">\r\n                <h4 className=\"card-header\">Admin Links</h4>\r\n                <ul className=\"list-group\">\r\n                <li className=\"list-group-item\">\r\n                        <Link className=\"nav-link\" to=\"/shopping/user/dashboard\">As User View </Link>\r\n                    </li>\r\n                    <li className=\"list-group-item\">\r\n                        <Link className=\"nav-link\" to=\"/shopping/create/category\">Create Category</Link>\r\n                    </li>\r\n                    <li className=\"list-group-item\">\r\n                        <Link className=\"nav-link\" to=\"/shopping/create/product\">Create Product</Link>\r\n                    </li>\r\n                    <li className=\"list-group-item\">\r\n                        <Link className=\"nav-link\" to=\"/shopping/admin/products\">Manage Products</Link>\r\n                    </li>\r\n                    <li className=\"list-group-item\">\r\n                        <Link className=\"nav-link\" to=\"/shopping/admin/orders\">View Orders</Link>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n        )\r\n    };\r\n\r\n    const adminInfo = () => {\r\n        return (\r\n            <div className=\"card mb-5\">\r\n                <h3 className=\"card-header\">Admin Information</h3>\r\n                <ul className=\"list-group\">\r\n                    <li className=\"list-group-item\">Name: {name}</li>\r\n                    <li className=\"list-group-item\">Email: {email}</li>\r\n                    <li className=\"list-group-item\">Role: {role === 1 ? 'Admin' : 'Registered User'}</li>\r\n                </ul>\r\n            </div>\r\n            \r\n        )\r\n    };\r\n\r\n    return (\r\n        <Layout title=\"Admin Dashboard\" description={`Good Day ${name}!`} className=\"container\">\r\n            <div className=\"row\">\r\n                <div className=\"col-md-3\">\r\n                    {adminLinks()}\r\n                </div>\r\n                <div className=\"col-md-9\">\r\n                    {adminInfo()}\r\n                </div>\r\n            </div>\r\n        </Layout>\r\n    )\r\n}\r\n\r\nexport default AdminDashboard;","import {API} from '../config'\r\n\r\n\r\nexport const createCategory = (userId, token, category) => {\r\n        // console.log(name, email, password);\r\n        return fetch(`${API}/category/create/${userId}`, {\r\n            method: \"POST\",\r\n            headers: {\r\n                Accept: 'application/json',\r\n                \"Content-Type\": \"application/json\",\r\n                Authorization: `Bearer ${token}`\r\n            },\r\n            body: JSON.stringify(category)\r\n        })\r\n        .then(response => {\r\n            return response.json()\r\n        })\r\n        .catch(err => {\r\n            console.log(err);\r\n            \r\n        })\r\n        \r\n}\r\n\r\nexport const createProduct = (userId, token, product) => {\r\n    // console.log(name, email, password);\r\n    return fetch(`${API}/product/create/${userId}`, {\r\n        method: \"POST\",\r\n        headers: {\r\n            Accept: 'application/json',\r\n            Authorization: `Bearer ${token}`\r\n        },\r\n        body: product\r\n    })\r\n    .then(response => {\r\n        return response.json()\r\n    })\r\n    .catch(err => {\r\n        console.log(err);\r\n        \r\n    })\r\n    \r\n}\r\n\r\nexport const getCategories = () => {\r\n    return fetch(`${API}/categories`, {\r\n        method: 'GET'\r\n    })\r\n    .then(response => {\r\n        return response.json();\r\n    })\r\n    .catch(err => console.log(err))\r\n}\r\n\r\nexport const listOrders = (userId, token) => {\r\n    return fetch(`${API}/order/list/${userId}`, {\r\n        method: 'GET',\r\n        headers: {\r\n            Accept: 'application/json',\r\n            Authorization: `Bearer ${token}`\r\n        },\r\n    })\r\n    .then(response => {\r\n        return response.json();\r\n    })\r\n    .catch(err => console.log(err))\r\n}\r\n\r\nexport const getStatusValues = (userId, token) => {\r\n    return fetch(`${API}/order/status-values/${userId}`, {\r\n        method: 'GET',\r\n        headers: {\r\n            Accept: 'application/json',\r\n            Authorization: `Bearer ${token}`\r\n        },\r\n    })\r\n    .then(response => {\r\n        return response.json();\r\n    })\r\n    .catch(err => console.log(err))\r\n}\r\n\r\nexport const updateOrderStatus = (userId, token, orderId, status) => {\r\n    return fetch(`${API}/order/${orderId}/status/${userId}`, {\r\n        method: 'PUT',\r\n        headers: {\r\n            Accept: 'application/json',\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({status, orderId})\r\n    })\r\n    .then(response => {\r\n        return response.json();\r\n    })\r\n    .catch(err => console.log(err))\r\n}\r\n\r\n// to perform crud operation \r\n// get all product \r\n// single prouduct ,update, delete \r\n\r\n\r\nexport const getProducts = () => {\r\n    return fetch(`${API}/products?limit=undefined`, {\r\n        method: 'GET'\r\n    })\r\n    .then(response => {\r\n        return response.json();\r\n    })\r\n    .catch(err => console.log(err))\r\n}\r\n\r\nexport const deleteProduct = (productId, userId, token) => {\r\n    return fetch(`${API}/product/${productId}/${userId}`, {\r\n        method: 'DELETE',\r\n        headers: {\r\n            Accept: 'application/json',\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: `Bearer ${token}`\r\n        },\r\n    })\r\n    .then(response => {\r\n        return response.json();\r\n    })\r\n    .catch(err => console.log(err))\r\n}\r\n\r\nexport const getProduct = (productId) => {\r\n    return fetch(`${API}/product/${productId}`, {\r\n        method: 'GET'\r\n    })\r\n    .then(response => {\r\n        return response.json();\r\n    })\r\n    .catch(err => console.log(err))\r\n}\r\n\r\nexport const updateProduct = (productId, userId, token, product) => {\r\n    return fetch(`${API}/product/${productId}/${userId}`, {\r\n        method: 'PUT',\r\n        headers: {\r\n            Accept: 'application/json',\r\n            // \"Content-Type\": \"application/json\",\r\n            Authorization: `Bearer ${token}`\r\n        },\r\n        body: product\r\n    })\r\n    .then(response => {\r\n        return response.json();\r\n    })\r\n    .catch(err => console.log(err))\r\n}","import React, {useState} from 'react'\r\nimport Layout from '../core/Layout'\r\nimport {isAuthenticated} from '../auth'\r\nimport { Link } from 'react-router-dom'\r\nimport { createCategory } from './apiAdmin'\r\n\r\nconst AddCategory = () => {\r\n    const [name, setName] = useState('');\r\n    const [error, setError] = useState(false);\r\n    const [success, setSuccess] = useState(false);\r\n\r\n    // desctructure use and token from localStorage \r\n\r\n    const {user, token} = isAuthenticated();\r\n\r\n    const handleChange = (e) => {\r\n        setError('')\r\n        setName(e.target.value)\r\n    }\r\n\r\n    const clickSubmit = (e) => {\r\n        e.preventDefault()\r\n        setError('')\r\n        setSuccess(false)\r\n        // make request of api to create category \r\n        createCategory(user._id, token, {name})\r\n        .then(data => {\r\n            if(data.error) {\r\n                setError(data.error)\r\n            } else {\r\n                setError('');\r\n                setSuccess(true);\r\n            }\r\n        })\r\n\r\n    }\r\n\r\n\r\n    const newCategoryForm = () => (\r\n        <form onSubmit={clickSubmit}>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Name</label>\r\n                <input type=\"text\" className=\"form-control\" value={name} autoFocus onChange={handleChange} required />\r\n            </div>\r\n            <button className=\"btn btn-outline-primary\">Create Category</button>\r\n\r\n        </form>\r\n    );\r\n\r\n    const showSuccess = () => {\r\n        if(success) {\r\n            return <h3 className=\"text-success\">{name} is created</h3>\r\n        }\r\n    }\r\n\r\n    const showError = () => {\r\n        if(error) {\r\n            return <h3 className=\"text-danger\">Category should be unique</h3>\r\n        }\r\n    }\r\n    const goBack = () => (\r\n        <div className=\"mt-5\">\r\n            <Link to=\"/shopping/admin/dashboard\" className=\"text-warning\">Back to dashboard</Link>\r\n        </div>\r\n    )\r\n\r\n    \r\n    return (\r\n        <Layout title=\"Add New Category\" description={`Good Day ${user.name}, Ready to Add?`}>\r\n                <div className=\"col-md-8 offset-md-2\">\r\n                    {showSuccess()}\r\n                    {showError()}\r\n                    {newCategoryForm()}\r\n                    {goBack()}\r\n                </div>\r\n        </Layout>\r\n    )\r\n\r\n}\r\n\r\nexport default AddCategory;","import React, {useState, useEffect} from 'react'\r\nimport Layout from '../core/Layout'\r\nimport {isAuthenticated} from '../auth'\r\nimport { Link } from 'react-router-dom'\r\nimport { createProduct, getCategories } from './apiAdmin'\r\n\r\nconst AddProduct = () => {\r\n\r\n    const [values, setValues] = useState({\r\n        name: '',\r\n        description: '',\r\n        price: '',\r\n        categories: [],\r\n        category: '',\r\n        shipping: '',\r\n        quantity: '',\r\n        photo: '',\r\n        loading: '',\r\n        error: '',\r\n        createdProduct: '',\r\n        redirectToProfile: false,\r\n        formData: ''\r\n    })\r\n\r\n    const {user, token} = isAuthenticated();\r\n    const {\r\n        name,\r\n        description,\r\n        price,\r\n        categories,\r\n        category,\r\n        shipping,\r\n        quantity,\r\n        loading,\r\n        error,\r\n        createdProduct,\r\n        redirectToProfile,\r\n        formData\r\n    } = values;\r\n    \r\n    // load categories and set form data \r\n    const init = () => {\r\n        getCategories().then(data => {\r\n            if(data.error) {\r\n                setValues({...values, error: data.error})\r\n            } else {\r\n                setValues({...values, categories: data, formData: new FormData()})\r\n            }\r\n        })\r\n    }\r\n\r\n    useEffect(() => {\r\n        init()\r\n    }, [])\r\n    \r\n    const handleChange = name => event => {\r\n        const value = name === 'photo' ? event.target.files[0] : event.target.value;\r\n        formData.set(name, value)\r\n        setValues({...values, [name]: value})\r\n    };\r\n\r\n    const clickSubmit = event => {\r\n        event.preventDefault()\r\n        setValues({...values, error: '', loading: true})\r\n        // console.log(values)\r\n        createProduct(user._id, token, formData)\r\n        .then(data => {\r\n            if(data.error) {\r\n                setValues({...values, error: data.error})\r\n            } else {\r\n                setValues({\r\n                    ...values,\r\n                    name: '',\r\n                    description: '',\r\n                    photo: '',\r\n                    price: '',\r\n                    quantity : '',\r\n                    loading: false,\r\n                    createdProduct: data.name\r\n                })\r\n            }\r\n        })\r\n    };\r\n\r\n    const newPostForm = () => (\r\n        <form className=\"mb-3\" onSubmit={clickSubmit}>\r\n            <h4 className=\"\">Post Photo</h4>\r\n            <div className=\"form-group\">\r\n                <label className=\"btn btn-secondary\">\r\n                    <input onChange={handleChange('photo')} type=\"file\" name=\"photo\" accept=\"image/*\" />\r\n                </label>\r\n            </div>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Name</label>\r\n                <input onChange={handleChange('name')} type=\"text\" className=\"form-control\" value={name} />\r\n            </div>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Description</label>\r\n                <textarea onChange={handleChange('description')} className=\"form-control\" value={description} />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Price</label>\r\n                <input onChange={handleChange('price')} type=\"number\" className=\"form-control\" value={price} />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Category</label>\r\n                <select onChange={handleChange('category')} className=\"form-control\">\r\n                    <option>Please Select</option>\r\n                        {categories && categories.map((c, i) => (\r\n                            <option key={i} value={c._id}>{c.name}</option>\r\n                        ))}\r\n                </select>\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Quantity</label>\r\n                <input onChange={handleChange('quantity')} type=\"number\" className=\"form-control\" value={quantity} />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Shipping</label>\r\n                <select onChange={handleChange('shipping')} className=\"form-control\">\r\n                    <option >Please Select</option>\r\n                    <option value=\"0\">No</option>\r\n                    <option value=\"1\">Yes</option>\r\n                </select>\r\n            </div>\r\n\r\n            <button className=\"btn btn-outline-primary\">Create Product</button>\r\n        </form>\r\n    )\r\n\r\n    const showError = () => (\r\n        <div className=\"alert alert-danger\" style={{display: error ? '' : 'none'}} >\r\n            {error}\r\n        </div>\r\n    )\r\n\r\n    const showSuccess = () => (\r\n        <div className=\"alert alert-info\" style={{display: createdProduct ? '' : 'none'}} >\r\n            <h2>{`${createdProduct}`} is created.</h2>\r\n        </div>\r\n    )\r\n\r\n    const showLoading = () => (\r\n        loading && (<div className=\"alert alert-success\">\r\n            <h2>loading...</h2>\r\n        </div>)\r\n    )\r\n\r\n\r\n    return (\r\n        <Layout title=\"Add New Product\" description={`Good Day ${user.name}, Ready to add new product?`}>\r\n                <div className=\"col-md-8 offset-md-2\">\r\n                    {showError()}\r\n                    {showSuccess()}\r\n                    {showLoading()}\r\n                    {newPostForm()}\r\n                </div>\r\n        </Layout>\r\n    )\r\n}\r\n\r\nexport default AddProduct;\r\n","import React, {useState} from 'react'\r\n\r\nconst Checkbox = ({categories, handleFilters}) => {\r\n\r\n    const [checked, setChecked] = useState([])\r\n\r\n    const handleToggle = c => () => {\r\n        // return the first index or -1\r\n        const currentCategoryId = checked.indexOf(c) \r\n        const newCheckCategoryId = [...checked]\r\n\r\n        // if currently check was not alreasy in check state > push \r\n        // else pull/take of \r\n        if(currentCategoryId === -1) {\r\n            newCheckCategoryId.push(c)\r\n        } else {\r\n            newCheckCategoryId.splice(currentCategoryId, 1)\r\n        }\r\n        // console.log(newCheckCategoryId);\r\n        setChecked(newCheckCategoryId)\r\n        handleFilters(newCheckCategoryId)\r\n    }\r\n\r\n\r\n    return categories.map((c, i) => (\r\n        <li key={i} className=\"list-unstyled\">\r\n            <label className=\"form-check-label\">\r\n            <input onChange={handleToggle(c._id)} value={checked.indexOf(categories._id === -1)} type=\"checkbox\" className=\"form-check-input\" />\r\n            {c.name}</label>\r\n        </li>\r\n    ))\r\n}\r\n\r\nexport default Checkbox;","import React, {useState} from 'react'\r\n\r\n\r\nconst Radiobox = ({prices, handleFilters}) => {\r\n    const [value, setValue] = useState(0)\r\n\r\n    const handleChange = (event) => {\r\n        handleFilters(event.target.value)\r\n        setValue(event.target.value)\r\n    }\r\n\r\n    return prices.map((p, i) => (\r\n        <div key={i}>\r\n            <label className=\"form-check-label\">\r\n            <input onChange={handleChange} name={p} value={`${p._id}`} type=\"radio\" className=\"mr-2 ml-4\" />\r\n            {p.name}</label>\r\n        </div>\r\n    ))\r\n}\r\n\r\nexport default Radiobox;","export const prices = [\r\n    {\r\n        _id: 0,\r\n        name: \"Any\",\r\n        array: []\r\n    },\r\n    {\r\n        _id: 1,\r\n        name: \"₹0 to ₹100\",\r\n        array: [0, 100]\r\n    },\r\n    {\r\n        _id: 2,\r\n        name: \"₹100 to ₹300\",\r\n        array: [100, 300]\r\n    },\r\n    {\r\n        _id: 3,\r\n        name: \"₹300 to ₹500\",\r\n        array: [300, 500]\r\n    },\r\n    {\r\n        _id: 4,\r\n        name: \"₹500 to ₹800\",\r\n        array: [500, 800]\r\n    },\r\n    {\r\n        _id: 5,\r\n        name: \"More than ₹800\",\r\n        array: [800, 10000]\r\n    },\r\n    \r\n]","import React, { useState, useEffect } from \"react\";\r\nimport Layout from \"./Layout\";\r\nimport Card from \"./Card\";\r\nimport { getCategories, getFilteredProducts } from \"./apiCore\";\r\nimport Checkbox from \"./Checkbox\";\r\nimport Radiobox from \"./Radiobox\";\r\nimport { prices } from \"./fixedPrices\";\r\n\r\n\r\n\r\nconst Shop = () => {\r\n    const [myFilters, setMyFilters] = useState({\r\n        filters: { category: [], price: [] }\r\n    });\r\n    const [categories, setCategories] = useState([])\r\n    const [error, setError] = useState(false)\r\n    const [limit, setLimit] = useState(6)\r\n    const [skip, setSkip] = useState(0)\r\n    const [size, setSize] = useState(0)\r\n    const [filteredResults, setFilteredResults] = useState([]);\r\n\r\n        // load categories and set form data \r\n        const init = () => {\r\n            getCategories().then(data => {\r\n                if(data.error) {\r\n                    setError(data.error)\r\n                } else {\r\n                    setCategories(data)\r\n                }\r\n            })\r\n        };\r\n\r\n        const loadFilteredResults = newFilters => {\r\n            // console.log(newFilters);\r\n            getFilteredProducts(skip, limit, newFilters).then(data => {\r\n                if(data.error) {\r\n                    setError(data.error)\r\n                } else {\r\n                    setFilteredResults(data.data)\r\n                    setSize(data.size)\r\n                    setSkip(0);\r\n                }\r\n            })\r\n            \r\n        }\r\n\r\n        const loadMore = () => {\r\n            let toSkip = skip + limit \r\n            getFilteredProducts(toSkip, limit, myFilters.filters).then(data => {\r\n                if(data.error) {\r\n                    setError(data.error)\r\n                } else {\r\n                    setFilteredResults([...filteredResults, data.data])\r\n                    setSize(data.size)\r\n                    setSkip(toSkip);\r\n                }\r\n            })\r\n            \r\n        }\r\n\r\n        const loadMoreButton = () => {\r\n            return (\r\n                size > 0 && size >= limit && (\r\n                    <button onClick={loadMore} className=\"btn btn-warning mb-5\">Load More</button>\r\n                )\r\n            )\r\n        }\r\n    \r\n        useEffect(() => {\r\n            init();\r\n            loadFilteredResults(myFilters.filters);\r\n        }, [])\r\n\r\n        const handleFilters = (filters, filterBy) => {\r\n            // console.log(filters, filterBy);\r\n            const newFilters = {...myFilters}\r\n            newFilters.filters[filterBy] = filters\r\n\r\n            if(filterBy === \"price\") {\r\n                let priceValues = handlePrice(filters)\r\n                newFilters.filters[filterBy] = priceValues\r\n            }\r\n\r\n            \r\n            loadFilteredResults(myFilters.filters)\r\n\r\n            setMyFilters(newFilters)   \r\n        }\r\n\r\n        const handlePrice = value => {\r\n            const data = prices\r\n            let array = []\r\n\r\n            for (let key in data) {\r\n                if(data[key]._id === parseInt(value)) {\r\n                    array = data[key].array\r\n                }\r\n            }\r\n            return array;\r\n        }\r\n        \r\n    return (\r\n        <Layout title=\"Shop Page\" description=\"Search and find book\" className=\"container-fluid\">\r\n\r\n            <div className=\"row\">\r\n                <div className=\"col-md-3\">\r\n                    <h5>Filter By Categories</h5>\r\n                    <ul>\r\n                        <Checkbox categories={categories} handleFilters={filters => handleFilters(filters, 'category')} />\r\n                    </ul>\r\n                    <h5>Filter By Price Range</h5>\r\n                    <div>\r\n                        <Radiobox prices={prices} handleFilters={filters => handleFilters(filters, 'price')} />\r\n                    </div>\r\n                    \r\n                    \r\n                </div>\r\n                <div className=\"col-md-9\">\r\n                <h2 className=\"mb-4\">Products</h2>\r\n                    <div className=\"row\">\r\n                        {filteredResults.map((product, i) => (\r\n                            <div key={i} className=\"col-md-4 mb-3\">\r\n                            <Card  product={product} />\r\n                        </div>\r\n                        ))}\r\n                    </div>\r\n                    <hr />\r\n                    {loadMoreButton()}\r\n                </div>\r\n            </div>\r\n\r\n\r\n            \r\n        </Layout> \r\n    );\r\n}\r\n\r\nexport default Shop","import React, {useState, useEffect} from 'react'\r\nimport Layout from './Layout'\r\nimport {read, listRelated} from './apiCore'\r\nimport Card from './Card';\r\n\r\nconst Product = (props) => {\r\n\r\n    const [product, setProduct] = useState({})\r\n    const [relatedProduct, setRelatedProduct] = useState([])\r\n    const [error, setError] = useState(false)\r\n\r\n    const loadSingleProduct = productId => {\r\n        read(productId).then(data => {\r\n            if(data.error) {\r\n                setError(data.error)\r\n            } else{\r\n                setProduct(data)\r\n                // fetch related product \r\n                listRelated(data._id).then((data) => {\r\n                    if(data.error) {\r\n                        setError(data.error)\r\n                    } else {\r\n                        setRelatedProduct(data)\r\n                    }\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    useEffect(() => {\r\n        const productId = props.match.params.productId\r\n        loadSingleProduct(productId)\r\n    }, [props])\r\n\r\n    return (\r\n        <Layout title={`${product.name}`} description={product.description == null ? 'No Description' : product.description.substring(0,100)} className=\"container\">\r\n            \r\n            <h2 className=\"mb-4\">{`${product.name}`}</h2>\r\n            <div className=\"row\">\r\n                <div className=\"col-md-8\">\r\n                {product && product.description && <Card product={product} showViewProductButton={false} /> }\r\n                </div>\r\n                <div className=\"col-md-4\">\r\n                    <h4>Related Product</h4>\r\n                    {relatedProduct.map((p, i) => (\r\n                        <div className=\"mb-3\">\r\n                            <Card key={i} product={p} />\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n            \r\n    </Layout> \r\n    )\r\n}\r\n\r\nexport default Product;","import React, {useState, useEffect} from 'react'\r\nimport {getBraintreeClientToken, processPayment, createOrder} from './apiCore'\r\nimport { isAuthenticated } from '../auth';\r\nimport { Link } from 'react-router-dom';\r\nimport DropIn from 'braintree-web-drop-in-react'\r\nimport { emptyCart } from './cartHelpers';\r\n\r\nconst Checkout = ({products}) => {\r\n\r\n    const [data, setData] = useState({\r\n        loading: false,\r\n        success: false,\r\n        clientToken: null,\r\n        error: '',\r\n        instance: {},\r\n        address: '',\r\n    });\r\n\r\n    const userId = isAuthenticated() && isAuthenticated().user._id;\r\n    const token = isAuthenticated() && isAuthenticated().token;\r\n\r\n    const getToken = (userId, token) => {\r\n        getBraintreeClientToken(userId, token)\r\n        .then(data => {\r\n            if (data.error) {\r\n                console.log(data.error);\r\n                setData({ ...data, error: data.error });\r\n            } else {\r\n                // console.log(data);\r\n                setData({ clientToken: data.clientToken });\r\n            }\r\n        });\r\n    };\r\n\r\n    useEffect(() => {\r\n        getToken(userId, token)\r\n    }, [])\r\n\r\n\r\n    const getTotal = () => {\r\n        return products.reduce((currentValue, nextValue) => {\r\n            return currentValue + nextValue.count * nextValue.price;\r\n        }, 0)\r\n    }\r\n\r\n    const showCheckout = () => {\r\n        return isAuthenticated() ? (\r\n            <div>{showDropIn()}</div>\r\n        ) : (\r\n            <Link  to=\"/shopping/signin\">\r\n                <button className=\"btn btn-primary\">Signin to checkout</button>\r\n\r\n            </Link>\r\n        )\r\n    }\r\n\r\n    let deliveryAddress = data.address;\r\n\r\n    const buy = () => {\r\n        setData({ loading: true });\r\n\r\n        // send the nonce to your server \r\n        // nonce= data.instance.requestPaymentMethod() \r\n        let nonce;\r\n        let getNonce = data.instance.requestPaymentMethod()\r\n        .then(data => {\r\n            // console.log(data)\r\n            nonce = data.nonce\r\n            // once we have nonce (card typeof, card number) send nonce as Paymentmethod \r\n            // also total \r\n            // console.log('send nonce and total to process', nonce, getTotal(products));\r\n\r\n            const paymentData = {\r\n                paymentMethodNonce: nonce,\r\n                amount: getTotal(products)\r\n            };\r\n\r\n            processPayment(userId, token, paymentData)\r\n            .then(response => {\r\n                // console.log(response)\r\n                \r\n                const createOrderData = {\r\n                    products: products,\r\n                    transaction_id: response.transaction.id,\r\n                    amount: response.transaction.amount,\r\n                    address: deliveryAddress\r\n                }\r\n                // create order\r\n                createOrder(userId, token, createOrderData).then(response => {\r\n                    // empty cart \r\n                    emptyCart(() => {\r\n                        console.log('payment success and empty cart')  \r\n                        setData({ loading: false, success: true });\r\n    \r\n                    })\r\n                })\r\n                \r\n                // setData({...data, success: response.success})\r\n                // // empty cart \r\n                // emptyCart(() => {\r\n                //     console.log('payment success and empty cart')  \r\n                //     setData({ loading: false, success: true });\r\n\r\n                // })\r\n            })\r\n            .catch(error => {\r\n                console.log(error)\r\n                setData({ loading: false });\r\n            })\r\n            \r\n            \r\n        })\r\n        .catch(error => {\r\n            // console.log('dropin error', error);\r\n            setData({...data, error: error.message})\r\n            \r\n        })\r\n    }\r\n\r\n    const handleAddress = event => {\r\n        setData({...data, address: event.target.value});\r\n    }\r\n\r\n    const showDropIn = () => (\r\n        <div onBlur={() => setData({...data, error: ''})}>\r\n            {data.clientToken !== null && products.length > 0 ? (\r\n                <div>\r\n                    <div className=\"form-group mb-3\">\r\n                        <label className=\"text-muted\">Delivery address:</label>\r\n                        <textarea onChange={handleAddress} className=\"form-control\" value={data.address}\r\n                        placeholder=\"Type your delivery address here...\" />\r\n                    </div>\r\n                    <DropIn options={{\r\n                        authorization: data.clientToken,\r\n                        // paypal: {\r\n                        //     flow: 'vault'\r\n                        // }\r\n                    }} onInstance={instance => (data.instance = instance)} />\r\n                    <button onClick={buy} className=\"btn btn-success btn-block\" >Pay</button>\r\n                </div>\r\n            ) : null}\r\n        </div>\r\n    )\r\n\r\n    const showError = error => (\r\n        <div className=\"alert alert-danger\" style={{display: error ? '': 'none'}}>\r\n            {error}\r\n        </div>\r\n    )\r\n\r\n    const showSuccess = success => (\r\n        <div className=\"alert alert-success\" style={{display: success ? '': 'none'}}>\r\n            Thanks! Your payment was successful\r\n        </div>\r\n    )\r\n\r\n    const showLoading = (loading) => (\r\n        loading && <h2>Loading...</h2>\r\n    )\r\n\r\n\r\n    return <div>\r\n        {/* {JSON.stringify(products)} */}\r\n        <h2 className=\"cart-empty\">Total: ₹{getTotal()}</h2>\r\n        {showLoading(data.loading)}\r\n        {showSuccess(data.success)}\r\n        {showError(data.error)}\r\n        {showCheckout()}\r\n\r\n    </div>\r\n}\r\n\r\nexport default Checkout;","import React, {useState, useEffect} from 'react'\r\nimport Layout from './Layout'\r\nimport {getProduct} from './apiCore'\r\nimport Card from './Card';\r\nimport { getCart, removeItem } from './cartHelpers';\r\nimport { Link } from 'react-router-dom';\r\nimport Checkout from './Checkout';\r\n\r\nconst Cart = () => {\r\n    const [items, setItems] = useState([])\r\n\r\n    useEffect(() => {\r\n        setItems(getCart())\r\n    }, [])\r\n    \r\n    const showItems = items => {\r\n        return (\r\n            <div>\r\n                <h2 className=\"cart-empty\">Your cart has {`${items.length}`} items</h2>\r\n                <hr />\r\n                {items.map((product, i) => (\r\n                    <Card key={i} product={product} \r\n                    showAddToCartButton={false}\r\n                    cartUpdate={true}\r\n                    showRemoveProductButton={true}\r\n                    \r\n                    />\r\n                ))}\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const noItemsMessage = () => (\r\n        <h2 className=\"cart-empty\">Your cart is empty. <br />\r\n        <Link to=\"/shopping/shop\">Continue shopping</Link>\r\n        </h2>\r\n    )\r\n\r\n    return (\r\n        <Layout title=\"Shopping Cart\" description=\"Your Added Products\" className=\"container-fluid\">\r\n            \r\n        <div className=\"row\">\r\n            <div className=\"col-md-6\">\r\n                {items.length > 0 ? showItems(items) : noItemsMessage()}\r\n            </div>\r\n            <div className=\"col-md-6\">\r\n                <h2 className=\"mb-4 cart-empty\">Your cart summary</h2>\r\n                <hr />\r\n                <Checkout products={items} />\r\n            </div>\r\n        </div>\r\n            \r\n    </Layout> \r\n    )\r\n}\r\n\r\nexport default Cart;","import React, {useState, useEffect} from 'react'\r\nimport Layout from '../core/Layout'\r\nimport {isAuthenticated} from '../auth'\r\nimport { Link } from 'react-router-dom'\r\nimport { listOrders, getStatusValues, updateOrderStatus } from './apiAdmin'\r\nimport moment from 'moment'\r\n\r\n\r\nconst Orders = () => {\r\n    const [orders, setOrders] = useState([])\r\n    const [statusValues, setStatusValues] = useState([])\r\n\r\n    const {user, token} = isAuthenticated()\r\n\r\n    const loadOrders = () => {\r\n        listOrders(user._id, token).then(data => {\r\n            if(data.error) {\r\n                console.log(data.error)\r\n            } else {\r\n                setOrders(data)\r\n            }\r\n        })\r\n    }\r\n\r\n    const loadStatusValues = () => {\r\n        getStatusValues(user._id, token).then(data => {\r\n            if(data.error) {\r\n                console.log(data.error)\r\n            } else {\r\n                setStatusValues(data)\r\n            }\r\n        })\r\n    }\r\n\r\n    useEffect(() => {\r\n        loadOrders();\r\n        loadStatusValues();\r\n    }, [])\r\n\r\n    const showOrdersLength = () => {\r\n        // return orders.length < 1 ? (<h4>No Orders</h4>) : null;\r\n        if(orders.length > 0) {\r\n            return (\r\n                <h1 className=\"text-danger display-2\">Total orders: {orders.length}</h1>\r\n            )\r\n        } else {\r\n            return <h1 className=\"text-danger\">No orders</h1>\r\n        }\r\n    }\r\n\r\n    const showInput = (key, value) => (\r\n        <div className=\"input-group mb-2 me-sm-2\">\r\n            <div className=\"input-group-prepend\">\r\n                <div className=\"input-group-text\">{key}</div>\r\n            </div>\r\n            <input type=\"text\" value={value} className=\"form-control\" readOnly />\r\n        </div>\r\n    )\r\n\r\n    const handleStatusChange = (e, orderId) => {\r\n        // console.log('update order status');\r\n        updateOrderStatus(user._id, token, orderId, e.target.value).then(datat => {\r\n            if(datat.error) {\r\n                console.log('Status update failed');\r\n            } else {\r\n                loadOrders()\r\n            }\r\n        })\r\n    }\r\n\r\n    const showStatus = (o) => (\r\n        <div className=\"form-group\">\r\n            <h3 className=\"mark mb-3\">Status: {o.status}</h3>\r\n            <select className=\"form-control\" onChange={(e) => handleStatusChange(e, o._id)}>\r\n                <option>Update Status</option>\r\n                {statusValues.map((status, index) => (\r\n                    <option value={status} key={index}>{status}</option>\r\n                ))}\r\n            </select>\r\n        </div>\r\n    )\r\n\r\n    return (\r\n        <Layout title=\"Orders\" description={`Good Day ${user.name}, Manage Orders`}>\r\n                <div className=\"col-md-8 offset-md-2\">\r\n                    {showOrdersLength()}\r\n                    {/* {JSON.stringify(orders)} */}\r\n\r\n                    {orders.map((o, oIndex) => {\r\n                        return (\r\n                            <div className=\"mt-5\" key={oIndex} style={{borderBottom: \"5px solid indigo\"}}>\r\n                                <h2 className=\"mb-5\">\r\n                                    <span className=\"bg-primary\">Order id: {o._id}</span>\r\n                                </h2>\r\n                                <ul className=\"list-group mb-2\">\r\n                                    <li className=\"list-group-item\">{showStatus(o)}</li>\r\n                                    <li className=\"list-group-item\">Transaction Id: {o.transaction_id}</li>\r\n                                    <li className=\"list-group-item\">Amount: {o.amount}</li>\r\n                                    <li className=\"list-group-item\">Order By: {o.user.name}</li>\r\n                                    <li className=\"list-group-item\">Ordered On: {moment(o.createdAt).fromNow()}</li>\r\n                                    <li className=\"list-group-item\">Delivery Address: {o.address}</li>\r\n                                </ul>\r\n                                <h3 className=\"mt-4 mb-4 font-italic\">Total Products in the order: {o.products.length}</h3>\r\n\r\n                                {o.products.map((p, pIndex) => (\r\n                                    <div className=\"mb-4\" key={pIndex} style={{padding: '20px', border: '1px solid indigo'}} >\r\n                                        {showInput('Product name', p.name)}\r\n                                        {showInput('Product Price', p.price)}\r\n                                        {showInput('Product total', p.count)}\r\n                                        {showInput('Product Id', p._id)}\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        )\r\n                    })}\r\n                </div>\r\n        </Layout>\r\n    )\r\n\r\n}\r\n\r\nexport default Orders;\r\n\r\n\r\n","import React, {useState, useEffect} from 'react'\r\nimport Layout from '../core/Layout'\r\nimport {isAuthenticated} from '../auth'\r\nimport { Link, Redirect } from 'react-router-dom'\r\nimport {read, update, updateUser} from './apiUser'\r\n\r\nconst Profile = ({match}) => {\r\n    const [values, setValues] = useState({\r\n        name: '',\r\n        email: '',\r\n        password: '',\r\n        error: false,\r\n        success: false\r\n    })\r\n\r\n    const {token} = isAuthenticated()\r\n\r\n    const {name, email, password, error, success} = values;\r\n\r\n\r\n    const init = (userId) => {\r\n        // console.log(userId);\r\n        read(userId, token).then(data => {\r\n            if(data.error) {\r\n                setValues({...values, error: true})\r\n            } else {\r\n                setValues({...values, name: data.name, email: data.email})\r\n            }\r\n        })\r\n    }\r\n\r\n    useEffect(() => {\r\n        init(match.params.userId)\r\n    }, [])\r\n\r\n    const handleChange = name => e => {\r\n        setValues({...values, error: false, [name] : e.target.value})\r\n    }\r\n\r\n    const clickSubmit = (e) => {\r\n        e.preventDefault()\r\n        update(match.params.userId, token, {name, email, password}).then(data => {\r\n            if(data.error) {\r\n                console.log(data.error);\r\n            } else {\r\n                updateUser(data, () => {\r\n                    setValues({...values, name: data.name, email: data.email, success: true})\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    const redirectUser = (success) => {\r\n        if(success) {\r\n            return <Redirect to=\"/shopping/cart\" />\r\n        }\r\n    }\r\n\r\n    const profileUpdate = (name, email, password) => (\r\n        <form>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Name</label>\r\n                <input type=\"text\" onChange={handleChange('name')} className=\"form-control\" value={name} />\r\n            </div>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Email</label>\r\n                <input type=\"text\" onChange={handleChange('email')} className=\"form-control\" value={email} />\r\n            </div>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Password</label>\r\n                <input type=\"password\" onChange={handleChange('password')} className=\"form-control\" value={password} />\r\n            </div>\r\n            <button onClick={clickSubmit} className=\"btn btn-primary\">Submit</button>\r\n        </form>\r\n    )\r\n\r\n    return (\r\n        <Layout title=\"Profile Update\" description=\"Update your profile\" className=\"container\">\r\n            <h2 className=\"mb-4\">Profile Update</h2>   \r\n            {/* {JSON.stringify(values)} */}\r\n            {profileUpdate(name, email, password)}\r\n            {redirectUser(success)}\r\n    </Layout> \r\n    )\r\n}\r\n\r\nexport default Profile;","import React, {useState, useEffect} from 'react'\r\nimport Layout from '../core/Layout'\r\nimport {isAuthenticated} from '../auth'\r\nimport { Link } from 'react-router-dom'\r\nimport { createCategory } from './apiAdmin'\r\n\r\nimport {getProducts, deleteProduct} from './apiAdmin'\r\n\r\nconst ManageProducts = () => {\r\n\r\n    const [products, setProducts] = useState([])\r\n    const {user, token} = isAuthenticated()\r\n\r\n    const loadProducts = () => {\r\n        getProducts().then(data => {\r\n            if(data.error) {\r\n                console.log(data.error);\r\n            } else {\r\n                setProducts(data)\r\n            }\r\n        })\r\n    }\r\n\r\n    const destroy = productId => {\r\n        deleteProduct(productId, user._id, token).then(data => {\r\n            if(data.error) {\r\n                console.log(data.error);\r\n            } else {\r\n                loadProducts()\r\n            }\r\n        })\r\n    }\r\n\r\n    useEffect(() => {\r\n        loadProducts()\r\n    }, [])\r\n\r\n    return (\r\n        <Layout title=\"Manage Products\" description=\"Perform CRUD\" className=\"container\">\r\n            <div className=\"row\">\r\n                <div className=\"col-md-12\">\r\n                <h2 className=\"text-center\">Total {products.length} products</h2>\r\n                <hr />\r\n                    <ul className=\"list-group\">\r\n                        {products.map((p, i) => (\r\n                            <li key={i} className=\"list-group-item d-flex justify-content-between align-items-center\">\r\n                                <strong>{p.name}</strong>    \r\n                                <Link to={`/admin/product/update/${p._id}`}>\r\n                                    <span className=\"badge badge-warning badge-pill\">Update</span>\r\n                                </Link>\r\n                                <span onClick={() => destroy(p._id)} className=\"badge badge-danger badge-pill\">Delete</span>\r\n                            </li>\r\n                        ))}\r\n                    </ul>\r\n                    </div>    \r\n            </div>       \r\n            \r\n            \r\n    </Layout> \r\n    )\r\n}\r\n\r\nexport default ManageProducts","import React, {useState, useEffect} from 'react'\r\nimport Layout from '../core/Layout'\r\nimport {isAuthenticated} from '../auth'\r\nimport { Link, Redirect } from 'react-router-dom'\r\nimport { getProduct, getCategories, updateProduct } from './apiAdmin'\r\n\r\nconst UpdateProduct = ({match}) => {\r\n\r\n    const [values, setValues] = useState({\r\n        name: '',\r\n        description: '',\r\n        price: '',\r\n        categories: [],\r\n        category: '',\r\n        shipping: '',\r\n        quantity: '',\r\n        photo: '',\r\n        loading: '',\r\n        error: '',\r\n        createdProduct: '',\r\n        redirectToProfile: false,\r\n        formData: ''\r\n    })\r\n\r\n    const {user, token} = isAuthenticated();\r\n    const {\r\n        name,\r\n        description,\r\n        price,\r\n        categories,\r\n        category,\r\n        shipping,\r\n        quantity,\r\n        loading,\r\n        error,\r\n        createdProduct,\r\n        redirectToProfile,\r\n        formData\r\n    } = values;\r\n\r\n    const init = (productId) => {\r\n        getProduct(productId).then(data => {\r\n            if(data.error) {\r\n                setValues({...values, error: data.error})\r\n            } else {\r\n                // populate the state \r\n                setValues({...values, \r\n                    name: data.name, \r\n                    description: data.description, \r\n                    price: data.price, \r\n                    category: data.category,\r\n                    shipping: data.shipping, \r\n                    quantity: data.quantity, \r\n                    formData: new FormData()\r\n                })\r\n                // load categories \r\n                initCategories()\r\n            }\r\n        })\r\n    }\r\n    \r\n    // load categories and set form data \r\n    const initCategories = () => {\r\n        getCategories().then(data => {\r\n            if(data.error) {\r\n                setValues({...values, error: data.error})\r\n            } else {\r\n                setValues({categories: data, formData: new FormData()})\r\n            }\r\n        })\r\n    };\r\n\r\n\r\n\r\n    useEffect(() => {\r\n        init(match.params.productId)\r\n    }, [])\r\n    \r\n    const handleChange = name => event => {\r\n        const value = name === 'photo' ? event.target.files[0] : event.target.value;\r\n        formData.set(name, value)\r\n        setValues({...values, [name]: value})\r\n    };\r\n\r\n    const clickSubmit = event => {\r\n        event.preventDefault()\r\n        setValues({...values, error: '', loading: true})\r\n        // console.log(values)\r\n        updateProduct(match.params.productId, user._id, token, formData)\r\n        .then(data => {\r\n            if(data.error) {\r\n                setValues({...values, error: data.error})\r\n            } else {\r\n                setValues({\r\n                    ...values,\r\n                    name: '',\r\n                    description: '',\r\n                    photo: '',\r\n                    price: '',\r\n                    quantity : '',\r\n                    loading: false,\r\n                    redirectToProfile: true,\r\n                    createdProduct: data.name\r\n                })\r\n            }\r\n        })\r\n    };\r\n\r\n    const newPostForm = () => (\r\n        <form className=\"mb-3\" onSubmit={clickSubmit}>\r\n            <h4 className=\"\">Post Photo</h4>\r\n            <div className=\"form-group\">\r\n                <label className=\"btn btn-secondary\">\r\n                    <input onChange={handleChange('photo')} type=\"file\" name=\"photo\" accept=\"image/*\" />\r\n                </label>\r\n            </div>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Name</label>\r\n                <input onChange={handleChange('name')} type=\"text\" className=\"form-control\" value={name} />\r\n            </div>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Description</label>\r\n                <textarea onChange={handleChange('description')} className=\"form-control\" value={description} />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Price</label>\r\n                <input onChange={handleChange('price')} type=\"number\" className=\"form-control\" value={price} />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Category</label>\r\n                <select onChange={handleChange('category')} className=\"form-control\">\r\n                    <option>Please Select</option>\r\n                        {categories && categories.map((c, i) => (\r\n                            <option key={i} value={c._id}>{c.name}</option>\r\n                        ))}\r\n                </select>\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Quantity</label>\r\n                <input onChange={handleChange('quantity')} type=\"number\" className=\"form-control\" value={quantity} />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Shipping</label>\r\n                <select onChange={handleChange('shipping')} className=\"form-control\">\r\n                    <option >Please Select</option>\r\n                    <option value=\"0\">No</option>\r\n                    <option value=\"1\">Yes</option>\r\n                </select>\r\n            </div>\r\n\r\n            <button className=\"btn btn-outline-primary\">Update Product</button>\r\n        </form>\r\n    )\r\n\r\n    const showError = () => (\r\n        <div className=\"alert alert-danger\" style={{display: error ? '' : 'none'}} >\r\n            {error}\r\n        </div>\r\n    )\r\n\r\n    const showSuccess = () => (\r\n        <div className=\"alert alert-info\" style={{display: createdProduct ? '' : 'none'}} >\r\n            <h2>{`${createdProduct}`} is updated!.</h2>\r\n        </div>\r\n    )\r\n\r\n    const redirectUser = () => {\r\n        if(redirectToProfile) {\r\n            if(!error) {\r\n                return <Redirect to=\"shopping/admin/products\" />\r\n            }\r\n        }\r\n    }\r\n    const showLoading = () => (\r\n        loading && (<div className=\"alert alert-success\">\r\n            <h2>loading...</h2>\r\n        </div>)\r\n    )\r\n\r\n\r\n    return (\r\n        <Layout title=\"Add New Product\" description={`Good Day ${user.name}, Ready to add new product?`}>\r\n                <div className=\"col-md-8 offset-md-2\">\r\n                    {showError()}\r\n                    {showSuccess()}\r\n                    {showLoading()}\r\n                    {newPostForm()}\r\n                    {redirectUser()}\r\n                </div>\r\n        </Layout>\r\n    )\r\n}\r\n\r\nexport default UpdateProduct;\r\n","import React from 'react'\r\nimport { BrowserRouter, Switch, Route } from 'react-router-dom'\r\n\r\n// pages \r\nimport Signup from './user/Signup'\r\nimport Signin from './user/Signin'\r\nimport Home from './core/Home'\r\n// import Menu from './core/Menu'\r\nimport PrivateRoute from './auth/PrivateRoute'\r\nimport Dashboard from './user/UserDashboard'\r\nimport AdminRoute from './auth/AdminRoute'\r\nimport AdminDashboard from './user/AdminDashboard'\r\nimport AddCategory from './admin/AddCategory'\r\nimport AddProduct from './admin/AddProduct'\r\nimport Shop from './core/Shop'\r\nimport Product from './core/Product'\r\nimport Cart from './core/Cart'\r\nimport Orders from './admin/Orders'\r\nimport Profile from './user/Profile'\r\nimport ManageProducts from './admin/ManageProducts'\r\nimport UpdateProduct from './admin/UpdateProduct'\r\n\r\n\r\nconst Routes = () => {\r\n    return (\r\n        <BrowserRouter>\r\n        {/* <Menu /> */}\r\n            <Switch>\r\n                <Route path=\"/shopping\" exact component={Home} />\r\n                <Route path=\"/shopping/shop\" exact component={Shop} />\r\n                <Route path=\"/shopping/signin\" exact component={Signin} />\r\n                <Route path=\"/shopping/signup\" exact component={Signup} />\r\n                <PrivateRoute path=\"/shopping/user/dashboard\" exact component={Dashboard} />\r\n                <AdminRoute path=\"/shopping/admin/dashboard\" exact component={AdminDashboard} />\r\n                <AdminRoute path=\"/shopping/create/category\" exact component={AddCategory} />\r\n                <AdminRoute path=\"/shopping/create/product\" exact component={AddProduct} />\r\n                <Route path=\"/shopping/product/:productId\" exact component={Product} />\r\n                <Route path=\"/shopping/cart\" exact component={Cart} />\r\n                <AdminRoute path=\"/shopping/admin/orders\" exact component={Orders} />\r\n                <PrivateRoute path=\"/shopping/profile/:userId\" exact component={Profile} />\r\n                <AdminRoute path=\"/shopping/admin/products\" exact component={ManageProducts} />\r\n                <AdminRoute path=\"/shopping/admin/product/update/:productId\" exact component={UpdateProduct} />\r\n                \r\n            </Switch>   \r\n        </BrowserRouter>\r\n    )\r\n}\r\n\r\nexport default Routes;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Routes from './Routes';\n\nReactDOM.render(\n  <React.StrictMode basename={process.env.PUBLIC_URL}>\n    <Routes />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}